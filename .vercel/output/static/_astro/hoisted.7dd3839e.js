class k{constructor(t){this.children=[],this.parent=t}delete(t){const n=this.children.indexOf(t);return n===-1?!1:(this.children=this.children.slice(0,n).concat(this.children.slice(n+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class E{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let n=this;for(let r=0;r<t.length;r+=1){const o=t[r];let i=n.get(o);if(r===t.length-1)return i instanceof E&&(n.delete(i),i=null),i||(i=new k(n),n.children[o]=i),i;i instanceof k&&(i=null),i||(i=new E(n),n.children[o]=i),n=i}return n}delete(t){for(const n in this.children)if(this.children[n]===t){const o=delete this.children[n];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),o}return!1}}function q(e){const{ctrlKey:t,altKey:n,metaKey:r,key:o}=e,i=[],l=[t,n,r,_(e)];for(const[c,p]of l.entries())p&&i.push(P[c]);return P.includes(o)||i.push(o),i.join("+")}const P=["Control","Alt","Meta","Shift"];function _(e){const{shiftKey:t,code:n,key:r}=e;return t&&!(n.startsWith("Key")&&r.toUpperCase()===r)}function U(e,t){let n;return n=Y(e,t),n=D(n),n}const X=/Mac|iPod|iPhone|iPad/i;function Y(e,t=navigator.platform){const n=X.test(t)?"Meta":"Control";return e.replace("Mod",n)}function D(e){const t=e.split("+").pop(),n=[];for(const r of["Control","Alt","Meta","Shift"])e.includes(r)&&n.push(r);return n.push(t),n.join("+")}const C=" ";class T{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(C)}registerKeypress(t){this._path=[...this._path,q(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],(t=this.onReset)===null||t===void 0||t.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),T.CHORD_TIMEOUT)}}T.CHORD_TIMEOUT=1500;function A(e){if(!(e instanceof HTMLElement))return!1;const t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&n!=="submit"&&n!=="reset"&&n!=="checkbox"&&n!=="radio"&&n!=="file"||e.isContentEditable}function W(e,t){const n=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});e.dispatchEvent(n)&&(A(e)?e.focus():e.click())}function j(e){const t=[];let n=[""],r=!1;for(let o=0;o<e.length;o++){if(r&&e[o]===","){t.push(n),n=[""],r=!1;continue}if(e[o]===C){n.push(""),r=!1;continue}else e[o]==="+"?r=!1:r=!0;n[n.length-1]+=e[o]}return t.push(n),t.map(o=>o.map(i=>U(i)).filter(i=>i!=="")).filter(o=>o.length>0)}const w=new E,V=new WeakMap;let v=w;const g=new T({onReset(){v=w}});function z(e){if(e.defaultPrevented||!(e.target instanceof Node))return;if(A(e.target)){const n=e.target;if(!n.id||!n.ownerDocument.querySelector(`[data-hotkey-scope="${n.id}"]`))return}const t=v.get(q(e));if(!t){g.reset();return}if(g.registerKeypress(e),v=t,t instanceof k){const n=e.target;let r=!1,o;const i=A(n);for(let l=t.children.length-1;l>=0;l-=1){o=t.children[l];const c=o.getAttribute("data-hotkey-scope");if(!i&&!c||i&&n.id===c){r=!0;break}}o&&r&&(W(o,g.path),e.preventDefault()),g.reset()}}function B(e,t){Object.keys(w.children).length===0&&document.addEventListener("keydown",z);const r=j(t||e.getAttribute("data-hotkey")||"").map(o=>w.insert(o).add(e));V.set(e,r)}document.addEventListener("astro:page-load",()=>{for(const e of document.querySelectorAll("[data-hotkey]"))B(e)});const Q=e=>history.state&&history.replaceState({...history.state,...e},""),S=!!document.startViewTransition,b=()=>!!document.querySelector('[name="astro-view-transitions-enabled"]'),$=e=>location.pathname===e.pathname&&location.search===e.search,F=e=>document.dispatchEvent(new Event(e)),K=()=>F("astro:page-load"),G=()=>{let e=document.createElement("div");e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),e.setAttribute("style","position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px"),document.body.append(e),setTimeout(()=>{let t=document.title||document.querySelector("h1")?.textContent||location.pathname;e.textContent=t},60)},m="data-astro-transition-persist";let L,y=0;history.state?(y=history.state.index,scrollTo({left:history.state.scrollX,top:history.state.scrollY})):b()&&history.replaceState({index:y,scrollX,scrollY,intraPage:!1},"");const J=(e,t)=>{let n=!1,r=!1;return(...o)=>{if(n){r=!0;return}e(...o),n=!0,setTimeout(()=>{r&&(r=!1,e(...o)),n=!1},t)}};async function Z(e){try{const t=await fetch(e),n=t.headers.get("content-type")?.replace(/;.*$/,"");return n!=="text/html"&&n!=="application/xhtml+xml"?null:{html:await t.text(),redirected:t.redirected?t.url:void 0,mediaType:n}}catch{return null}}function I(){const e=document.querySelector('[name="astro-view-transitions-fallback"]');return e?e.getAttribute("content"):"animate"}function tt(){let e=Promise.resolve();for(const t of Array.from(document.scripts)){if(t.dataset.astroExec==="")continue;const n=document.createElement("script");n.innerHTML=t.innerHTML;for(const r of t.attributes){if(r.name==="src"){const o=new Promise(i=>{n.onload=i});e=e.then(()=>o)}n.setAttribute(r.name,r.value)}n.dataset.astroExec="",t.replaceWith(n)}return e}function et(e){const t=e.effect;return!t||!(t instanceof KeyframeEffect)||!t.target?!1:window.getComputedStyle(t.target,t.pseudoElement).animationIterationCount==="infinite"}const O=(e,t,n)=>{const r=!$(e);let o=!1;e.href!==location.href&&(t?history.replaceState({...history.state},"",e.href):(history.replaceState({...history.state,intraPage:n},""),history.pushState({index:++y,scrollX:0,scrollY:0},"",e.href)),r&&(scrollTo({left:0,top:0,behavior:"instant"}),o=!0)),e.hash?location.href=e.href:o||scrollTo({left:0,top:0,behavior:"instant"})};function nt(e){const t=[];for(const n of e.querySelectorAll("head link[rel=stylesheet]"))if(!document.querySelector(`[${m}="${n.getAttribute(m)}"], link[rel=stylesheet][href="${n.getAttribute("href")}"]`)){const r=document.createElement("link");r.setAttribute("rel","preload"),r.setAttribute("as","style"),r.setAttribute("href",n.getAttribute("href")),t.push(new Promise(o=>{["load","error"].forEach(i=>r.addEventListener(i,o)),document.head.append(r)}))}return t}async function H(e,t,n,r,o){const i=s=>{const u=s.getAttribute(m),d=u&&e.head.querySelector(`[${m}="${u}"]`);if(d)return d;if(s.matches("link[rel=stylesheet]")){const h=s.getAttribute("href");return e.head.querySelector(`link[rel=stylesheet][href="${h}"]`)}return null},l=()=>{const s=document.activeElement;if(s?.closest(`[${m}]`)){if(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement){const u=s.selectionStart,d=s.selectionEnd;return{activeElement:s,start:u,end:d}}return{activeElement:s}}else return{activeElement:null}},c=({activeElement:s,start:u,end:d})=>{s&&(s.focus(),(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&(s.selectionStart=u,s.selectionEnd=d))},p=()=>{const s=document.documentElement,u=[...s.attributes].filter(({name:a})=>(s.removeAttribute(a),a.startsWith("data-astro-")));[...e.documentElement.attributes,...u].forEach(({name:a,value:f})=>s.setAttribute(a,f));for(const a of document.scripts)for(const f of e.scripts)if(!a.src&&a.textContent===f.textContent||a.src&&a.type===f.type&&a.src===f.src){f.dataset.astroExec="";break}for(const a of Array.from(document.head.children)){const f=i(a);f?f.remove():a.remove()}document.head.append(...e.head.children);const d=document.body,h=l();document.body.replaceWith(e.body);for(const a of d.querySelectorAll(`[${m}]`)){const f=a.getAttribute(m),M=document.querySelector(`[${m}="${f}"]`);M&&M.replaceWith(a)}c(h),r?scrollTo(r.scrollX,r.scrollY):O(t,n.history==="replace",!1),F("astro:after-swap")},x=nt(e);if(x.length&&await Promise.all(x),o==="animate"){const s=document.getAnimations();document.documentElement.dataset.astroTransitionFallback="old";const u=document.getAnimations().filter(h=>!s.includes(h)&&!et(h));await Promise.all(u.map(h=>h.finished)),p(),document.documentElement.dataset.astroTransitionFallback="new"}else p()}async function N(e,t,n,r){let o;const i=t.href,l=await Z(i);if(l===null){location.href=i;return}l.redirected&&(t=new URL(l.redirected)),L??=new DOMParser;const c=L.parseFromString(l.html,l.mediaType);if(c.querySelectorAll("noscript").forEach(p=>p.remove()),!c.querySelector('[name="astro-view-transitions-enabled"]')){location.href=i;return}r||history.replaceState({...history.state,scrollX,scrollY},""),document.documentElement.dataset.astroTransition=e,S?o=document.startViewTransition(()=>H(c,t,n,r)).finished:o=H(c,t,n,r,I());try{await o}finally{await tt(),K(),G()}}function rt(e,t){if(!b()){location.href=e;return}const n=new URL(e,location.href);location.origin===n.origin&&$(n)?O(n,t?.history==="replace",!0):N("forward",n,t??{})}function ot(e){if(!b()&&e.state){history.scrollRestoration&&(history.scrollRestoration="manual"),location.reload();return}if(e.state===null){history.scrollRestoration&&(history.scrollRestoration="auto");return}history.scrollRestoration&&(history.scrollRestoration="manual");const t=history.state;if(t.intraPage)scrollTo(t.scrollX,t.scrollY);else{const n=t.index,r=n>y?"forward":"back";y=n,N(r,new URL(location.href),{},t)}}const R=()=>{Q({scrollX,scrollY})};{(S||I()!=="none")&&(addEventListener("popstate",ot),addEventListener("load",K),"onscrollend"in window?addEventListener("scrollend",R):addEventListener("scroll",J(R,300)));for(const e of document.scripts)e.dataset.astroExec=""}function it(){const e=document.querySelector('[name="astro-view-transitions-fallback"]');return e?e.getAttribute("content"):"animate"}function st(e){if(document.querySelector(`link[rel=prefetch][href="${e}"]`))return;if(navigator.connection){let n=navigator.connection;if(n.saveData||/(2|3)g/.test(n.effectiveType||""))return}let t=document.createElement("link");t.setAttribute("rel","prefetch"),t.setAttribute("href",e),document.head.append(t)}(S||it()!=="none")&&(document.addEventListener("click",e=>{let t=e.target;t instanceof Element&&t.tagName!=="A"&&(t=t.closest("a")),!(!t||!(t instanceof HTMLAnchorElement)||t.dataset.astroReload!==void 0||t.hasAttribute("download")||!t.href||t.target&&t.target!=="_self"||t.origin!==location.origin||e.button!==0||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||e.defaultPrevented)&&(e.preventDefault(),rt(t.href,{history:t.dataset.astroHistory==="replace"?"replace":"auto"}))}),["mouseenter","touchstart","focus"].forEach(e=>{document.addEventListener(e,t=>{if(t.target instanceof HTMLAnchorElement){let n=t.target;n.origin===location.origin&&n.pathname!==location.pathname&&b()&&st(n.pathname)}},{passive:!0,capture:!0})}));export{B as i};

---
import TimeSlot from "@/components/TimeSlot.astro";
import { getEntry, type CollectionEntry, getEntries } from 'astro:content';
import invariant from "tiny-invariant";
type Slot = CollectionEntry<"schedules">["data"]["talks"][number];
export interface Props {
  on: CollectionEntry<"schedules">,
  for: Slot
  class?: string
}

const { for: slot, on: day } = Astro.props
invariant(slot.talk, `Slot ${slot} has no talk`)
const talk = await getEntry(slot.talk)
const speaker = await getEntry(talk.data.speaker)
---

<article class="grid grid-cols-12">
  <div class="col-span-2 text-sky-300 flex justify-center items-center text-center">
    <TimeSlot on={day.id} for={slot.time} />
  </div>
  <div class="col-span-8">
    <header class="mb-2">
      <p class="italic text-sm text-slate-500">
        By {speaker.data.name}
      </p>
      <h3 transition:animate="initial" transition:name={`talk-title-${talk.id}`} class="font-bold text-xl group-hover:text-teal-300">{talk.data.title}</h3>
    </header>
    <p class="font-sans text-slate-400">{talk.data.description}</p>
  </div>
</article>
